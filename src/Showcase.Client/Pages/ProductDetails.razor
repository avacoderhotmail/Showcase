@page "/products/{id:int}"
@using Showcase.Client.Services
@using Showcase.Contracts.Contracts.Product
@inject IProductApiService ProductService

<h3>Product Details</h3>

@if (product == null)
{
    <p>Loading...</p>
}
else
{
    <div class="col">
        <div class="card h-100 shadow-sm">
            <img src="@product.ImageUrl" class="card-img-top" alt="@product.Name" style="height: 180px; object-fit: scale-down;" />
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">
                    <a href="/products/@product.Id">@product.Name</a>
                </h5>
                <p class="card-text text-muted">@product.Description</p>
                <div class="mt-auto">
                    <p class="fw-bold">$@product.Price</p>
                </div>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public int id { get; set; }
    private ProductDto? product;

    protected override async Task OnInitializedAsync()
    {
        product = await ProductService.GetProductByIdAsync(id);
    }
}